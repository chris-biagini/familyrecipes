/*********************************************************/
/* Base styles, applicable to all screen sizes and media */
/*********************************************************/

/* Made with invaluable assistance from ChatGPT and Claude. :) */

:root {
  --border-color: rgb(25, 25, 25);
  --text-color: rgb(50, 50, 50);

  --frosted-glass-bg: rgba(255, 252, 249, 0.75);
  --content-background-color: rgb(255, 252, 249);

  --breathing-room: 3rem;

  /* Gingham */
  --gingham-base: rgb(249, 246, 243);
  --gingham-stripe-color: rgba(190, 12, 30, 0.5);
  --gingham-stripe-width: 75px;
  --weave-color: rgba(150, 150, 150, 0.05);
  --weave-stripe-width: 1.5px;

  /* Shared UI colors */
  --checked-color: #2a5a3a;
  --muted-text: #666;
  --muted-text-light: #888;
  --border-light: #ccc;
  --border-muted: #999;
  --separator-color: #ddd;
  --surface-alt: #fafafa;
  --danger-color: #c00;
  --accent-color: rgb(155, 10, 25);
}

html {
  font-size: 18px;
  touch-action: manipulation; /* Should prevent double-tap zoom, but maybe doesn't? */

  /* Gingham pattern background — applied directly to the root element
     so the browser paints it across the entire canvas (CSS spec), filling
     every pixel of the physical screen including behind iOS Safari's
     status bar and toolbar.  background-attachment: fixed keeps it
     stationary on desktop; iOS ignores that and falls back to scroll,
     but the repeating pattern makes the movement imperceptible. */
  /* Overscroll/edge color: the pink you get compositing one gingham
     stripe over the base.  Visible during iOS rubber-band bounce and
     in any sliver the gradient layers can't reach. */
  background-color: rgb(205, 71, 84);
  background-attachment: fixed;
  background-image: repeating-linear-gradient(
      135deg,
      var(--gingham-stripe-color) 0,
      var(--gingham-stripe-color) var(--gingham-stripe-width),
      transparent var(--gingham-stripe-width),
      transparent calc(2 * var(--gingham-stripe-width))
    ),
    repeating-linear-gradient(
      45deg,
      var(--gingham-stripe-color) 0,
      var(--gingham-stripe-color) var(--gingham-stripe-width),
      transparent var(--gingham-stripe-width),
      transparent calc(2 * var(--gingham-stripe-width))
    ),
    repeating-linear-gradient(
      0deg,
      var(--weave-color) 0,
      var(--weave-color) var(--weave-stripe-width),
      transparent var(--weave-stripe-width),
      transparent calc(2 * var(--weave-stripe-width))
    ),
    repeating-linear-gradient(
      90deg,
      var(--weave-color) 0,
      var(--weave-color) var(--weave-stripe-width),
      transparent var(--weave-stripe-width),
      transparent calc(2 * var(--weave-stripe-width))
    ),
    /* Opaque base layer — keeps the gingham appearance unchanged
       despite the pink background-color underneath. */
    linear-gradient(var(--gingham-base), var(--gingham-base));
}

body,
html {
  margin: 0;
  padding: 0;
}

body {
  padding: env(safe-area-inset-top, 0px) var(--breathing-room) 0;

  font-family: "Bodoni 72", Georgia, serif;
  color: var(--text-color);
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Gingham appearance inspired by <https://www.penguinrandomhouse.com/books/13304/better-homes-and-gardens-new-cookbook-by-better-homes-and-gardens-editors/> */
/* Implementation inspired by <https://www.gradientmagic.com/collection/gingham/gradient/1575939528284> */

nav {
  margin: 0 calc(-1 * var(--breathing-room));
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 2.75rem;

  background-color: var(--frosted-glass-bg);
  border-bottom: 1px solid var(--gingham-stripe-color);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.08),
    0 1px 2px rgba(0, 0, 0, 0.04);
}

nav a {
  font-family: "Futura", sans-serif;
  display: inline-block;
  text-decoration: none;
  font-weight: 600;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  padding: 0.5rem 0.9rem;
  line-height: 1.5;
  color: var(--text-color);
  transition: color 0.2s ease;
  position: relative;
}

nav a::after {
  content: "";
  position: absolute;
  bottom: 0.35rem;
  left: 0.9rem;
  right: 0.9rem;
  height: 1px;
  background-color: var(--accent-color);
  transform: scaleX(0);
  transition: transform 0.25s ease;
}

nav a:hover::after,
nav a:focus::after {
  transform: scaleX(1);
}

nav > div:first-child {
  display: flex;
  align-items: center;
}

nav > div:first-child a + a::before {
  content: "\00b7";
  position: absolute;
  left: 0;
  transform: translateX(-50%);
  color: var(--border-muted);
  font-size: 1rem;
  letter-spacing: 0;
}

nav button {
  margin: 0.4rem 0.5rem;
}

/* Buttons — the one shared interactive style across the site */
.btn {
  appearance: none;
  -webkit-appearance: none;
  font-family: "Futura", sans-serif;
  font-size: 0.85rem;
  background: var(--content-background-color);
  border: 1px solid var(--border-muted);
  border-radius: 3px;
  padding: 0.3rem 0.75rem;
  color: var(--text-color);
  cursor: pointer;
  line-height: 1.5;
}

.btn:hover {
  border-color: var(--border-color);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.btn:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
}

nav a:hover,
nav a:focus {
  color: var(--accent-color);
}

nav a:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
  border-radius: 2px;
}

main a {
  color: var(--text-color);
  text-decoration: underline;
  text-decoration-color: var(--border-light);
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
  transition: color 0.2s ease, text-decoration-color 0.2s ease;
}

main a:hover {
  color: var(--accent-color);
  text-decoration-color: var(--accent-color);
}

main a:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
  border-radius: 2px;
}

main {
  max-width: 35rem; /* Ensures it never exceeds 35rem */
  margin: var(--breathing-room) auto; /* Center horizontally with top/bottom margin */
  padding: 3rem;

  border: 1px solid var(--border-color);
  background-color: var(--content-background-color);
  border-radius: 0.25rem;

  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.08),
    0 4px 12px rgba(0, 0, 0, 0.06);
}

header {
  text-align: center;
}

header h1 {
  /* font-family: 'quigleywigglyregular', cursive; */
  font-family: "Futura", sans-serif;
  font-size: 2.5rem;
  margin: 0 0 1rem 0;
}

header p {
  font-style: italic;
  font-size: 1.3rem;
  margin-top: 0;
}

header .yield-line {
  font-style: normal;
  font-size: 1.1rem;
  margin-top: -0.5rem;
}

.scalable.scaled {
  background-color: rgba(255, 243, 205, 0.6);
  border-radius: 2px;
  padding: 0 1px;
}

.yield-line .scalable.scaled {
  background-color: transparent;
}

.toc_nav {
  text-align: center;
  margin-bottom: 2.5rem;
  padding: 1.25rem 0;
  border-top: 1px solid var(--separator-color);
  border-bottom: 1px solid var(--separator-color);
}

.toc_nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  line-height: 2;
}

.toc_nav ul li {
  display: inline;
  margin: 0;
}

.toc_nav ul li:not(:last-child)::after {
  content: " \00b7 ";
  color: var(--muted-text-light);
}

.toc_nav ul li a {
  font-style: italic;
  text-decoration-color: var(--border-muted);
}

section {
  margin-top: 2.5rem;
  break-inside: avoid;
}

section > ul {
  column-count: 3;
  list-style: none;
  padding-left: 0.5rem;
}

section > ul li {
  white-space: nowrap;
}

/* in allrecipes view, all headers get demoted by one to avoid multiple H1's on page */
section h2 {
  font-family: "Futura", sans-serif;
  font-size: 1.25rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-top: 0;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--border-light);
  padding-bottom: 0.35rem;
}

/* Homepage and index category headers are slightly smaller */
.homepage section h2,
.index section h2 {
  font-size: 1.1rem;
  padding-bottom: 0.4rem;
}

section > div:has(.ingredients):has(.instructions) {
  display: grid;
  grid-template-columns: 10rem 1fr;
  gap: 2rem;
}

.instructions p {
  margin: 0 0 1.5rem 0;
}

.ingredients ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.ingredients li {
  break-inside: avoid;
  padding: 0 0 1rem 0;
}

/* .ingredients ul li small::before 	{ content: "↳ "; } */

.ingredients ul li small {
  display: block;
  font-style: italic;
  font-size: 0.95em;
  padding: 0.25rem 0 0 1rem;
}

footer {
  font-style: italic;
  text-align: center;
  position: relative;
}

footer:before {
  content: "❇︎";
}

footer small {
  text-align: right; /* Right-align the small text */
  display: block; /* Ensures it takes up a full line for alignment to work */
}

/************************/
/* Nutrition facts card */
/************************/

.nutrition-facts {
  margin-top: 2.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--separator-color);
}

.nutrition-facts h2 {
  font-family: "Futura", sans-serif;
  font-size: 1rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  text-align: center;
  margin: 0 0 1rem 0;
  border: none;
  padding: 0;
}

.nutrition-facts table {
  width: 100%;
  max-width: 22rem;
  margin-inline: auto;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.nutrition-facts thead th {
  font-family: "Futura", sans-serif;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 600;
  text-align: right;
  padding: 0.25rem 0;
  border-bottom: 2px solid var(--border-color);
}

.nutrition-facts thead th:first-child {
  text-align: left;
}

.nutrition-facts td {
  padding: 0.3rem 0;
  border-bottom: 1px solid var(--separator-color);
  text-align: right;
}

.nutrition-facts td:first-child {
  text-align: left;
  font-weight: bold;
}

.nutrition-facts tr[class^="indent-"] td:first-child {
  font-weight: normal;
}

.nutrition-facts tr.indent-1 td:first-child {
  padding-left: 1em;
}

.nutrition-facts tr.indent-2 td:first-child {
  padding-left: 2em;
}

.nutrition-facts tr:last-child td {
  border-bottom: 2px solid var(--border-color);
}

.nutrition-note {
  font-size: 0.8rem;
  font-style: italic;
  color: var(--muted-text);
  text-align: center;
  margin: 0.75rem 0 0;
}

/******************************************************/
/* Styles for interactivity, applies to screen media */
/*****************************************************/

@media screen {
  /* switch to hand pointer for interactive elements */
  .recipe section h2,
  .recipe .instructions p,
  .recipe .ingredients li {
    cursor: pointer;
  }

  /* Target h2 in a section where every <li> and <p> is "crossed-off". */
  .crossed-off,
  section:not(:has(li:not(.crossed-off), p:not(.crossed-off))) h2 {
    text-decoration: line-through;
    color: var(--muted-text-light);
    border-color: var(--muted-text-light);
  }
}

/****************************************/
/* Styles for mobiles and small screens */
/****************************************/

/* small mobiles only */
@media screen and (max-width: 600px) and (pointer: coarse) {
  :root {
    --breathing-room: 0.75rem;
  }

  html {
    font-size: 16px;
  }
}

/* anything with a narrow window */
@media screen and (max-width: 600px) {
  :root {
    --breathing-room: 1.5rem;
  }

  main {
    padding: 1.5rem;
  }

  section > div:has(.ingredients):has(.instructions) {
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }

  /* On small screens, switch to two ingredient columns */
  .ingredients ul {
    column-count: 2;
    column-gap: 0.5rem;
  }

  /* Switch to two index columns as well */
  section > ul {
    column-count: 2;
  }
}

/************************/
/* Notification toast   */
/************************/

.notify-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem calc(0.75rem + env(safe-area-inset-bottom, 0px));
  background: var(--frosted-glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-top: 1px solid var(--gingham-stripe-color);
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.08), 0 -1px 2px rgba(0, 0, 0, 0.04);
  font-family: "Futura", sans-serif;
  font-size: 0.9rem;
  color: var(--text-color);
  transform: translateY(100%);
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.notify-bar.notify-visible {
  transform: translateY(0);
  opacity: 1;
}

.notify-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-shrink: 0;
}


.notify-dismiss {
  appearance: none;
  -webkit-appearance: none;
  background: none;
  border: none;
  font-size: 1.25rem;
  color: var(--border-muted);
  cursor: pointer;
  padding: 0.25rem 0.4rem;
  line-height: 1;
}

.notify-dismiss:hover {
  color: var(--muted-text);
}

/********************/
/* Styles for print */
/********************/

@media print {
  @page {
    margin: 1in 1.5in;
  }

  html {
    font-size: 12pt;
    margin: 0;
    padding: 0;
    background: white;
  }

  body {
    margin: 0 auto;
    padding: 0;
    background-color: white;
    color: black;
    background: none;
  }

  nav,
  .notify-bar {
    display: none;
  }

  h1 {
    margin-top: 0;
  }

  main {
    margin: 0;
    padding: 0;
    border: none;
    background-color: white;
    box-shadow: none;
    max-width: none;
  }

  a {
    color: black;
    text-decoration: none;
  }

  .scalable.scaled {
    background-color: transparent;
  }
}
