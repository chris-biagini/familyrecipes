<% content_for(:title) { "#{current_kitchen.name}: Groceries" } %>

<% content_for(:head) do %>
  <%= stylesheet_link_tag 'groceries', "data-turbo-track": "reload" %>
<% end %>

<% if current_kitchen.member?(current_user) %>
<% content_for(:extra_nav) do %>
  <div>
    <button type="button" id="edit-aisle-order-button" class="btn">Edit Aisle Order</button>
  </div>
<% end %>
<% end %>

<header id="groceries-header">
  <h1>Groceries</h1>
</header>

<noscript>
  <p><em>This page requires JavaScript to build your shopping list.</em></p>
</noscript>

<div id="groceries-app" class="hidden-until-js"
     data-controller="wake-lock grocery-sync grocery-ui"
     data-kitchen-slug="<%= current_kitchen.slug %>"
     data-state-url="<%= groceries_state_path %>"
     data-check-url="<%= groceries_check_path %>"
     data-custom-items-url="<%= groceries_custom_items_path %>">

  <%= render 'groceries/custom_items' %>

  <div id="shopping-list"></div>

</div>

<% if current_kitchen.member?(current_user) %>
<%= render layout: 'shared/editor_dialog',
    locals: { title: 'Aisle Order',
              dialog_data: { editor_open: '#edit-aisle-order-button',
                             editor_url: groceries_aisle_order_path,
                             editor_method: 'PATCH',
                             editor_on_success: 'close',
                             editor_body_key: 'aisle_order',
                             editor_load_url: groceries_aisle_order_content_path,
                             editor_load_key: 'aisle_order' } } do %>
  <textarea class="editor-textarea" data-editor-target="textarea" spellcheck="false" placeholder="Loading..."></textarea>
<% end %>
<% end %>
